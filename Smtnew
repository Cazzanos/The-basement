
--[[
Original concept from Kavo UI Library
Completely rewritten and modernized by Cazan
]]

local Library = {}
getgenv().UI_CONFIG = getgenv().UI_CONFIG or {}

-- Services
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")

-- Constants
local MOBILE_THRESHOLD = 768
local ANIMATION_SPEED = 0.3
local QUICK_ANIMATION = 0.15

-- Modern color palette
local Colors = {
    Primary = Color3.fromRGB(99, 102, 241),      -- Indigo
    Secondary = Color3.fromRGB(139, 92, 246),    -- Purple
    Background = Color3.fromRGB(15, 15, 23),     -- Dark blue-black
    Surface = Color3.fromRGB(30, 30, 46),        -- Dark surface
    SurfaceLight = Color3.fromRGB(45, 45, 69),   -- Lighter surface
    Text = Color3.fromRGB(255, 255, 255),        -- White text
    TextSecondary = Color3.fromRGB(156, 163, 175), -- Gray text
    Border = Color3.fromRGB(75, 85, 99),         -- Border gray
    Success = Color3.fromRGB(34, 197, 94),       -- Green
    Warning = Color3.fromRGB(251, 191, 36),      -- Yellow
    Error = Color3.fromRGB(239, 68, 68),         -- Red
    Glass = Color3.fromRGB(255, 255, 255)        -- For glassmorphism
}

-- Utility functions
local Utility = {}

function Utility:IsMobile()
    return UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
end

function Utility:GetScreenSize()
    local viewport = workspace.CurrentCamera.ViewportSize
    return viewport.X, viewport.Y
end

function Utility:CreateTweenInfo(duration, style, direction)
    return TweenInfo.new(
        duration or ANIMATION_SPEED,
        style or Enum.EasingStyle.Quart,
        direction or Enum.EasingDirection.Out
    )
end

function Utility:Tween(object, properties, duration, style, direction)
    local tween = TweenService:Create(
        object,
        Utility:CreateTweenInfo(duration, style, direction),
        properties
    )
    tween:Play()
    return tween
end

function Utility:CreateGlow(parent, color, intensity)
    local glow = Instance.new("ImageLabel")
    glow.Name = "Glow"
    glow.Parent = parent
    glow.AnchorPoint = Vector2.new(0.5, 0.5)
    glow.Position = UDim2.new(0.5, 0, 0.5, 0)
    glow.Size = UDim2.new(1, 40, 1, 40)
    glow.BackgroundTransparency = 1
    glow.Image = "rbxassetid://8560915132"
    glow.ImageColor3 = color or Colors.Primary
    glow.ImageTransparency = 1 - (intensity or 0.3)
    glow.ZIndex = -1
    return glow
end

function Utility:CreateGradient(parent, colors, rotation)
    local gradient = Instance.new("UIGradient")
    gradient.Parent = parent
    gradient.Color = ColorSequence.new(colors or {
        ColorSequenceKeypoint.new(0, Colors.Primary),
        ColorSequenceKeypoint.new(1, Colors.Secondary)
    })
    gradient.Rotation = rotation or 45
    return gradient
end

function Utility:CreateBlur(parent, size)
    local blur = Instance.new("Frame")
    blur.Name = "BlurEffect"
    blur.Parent = parent
    blur.Size = UDim2.new(1, 0, 1, 0)
    blur.BackgroundColor3 = Colors.Glass
    blur.BackgroundTransparency = 0.9
    blur.BorderSizePixel = 0
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, size or 12)
    corner.Parent = blur
    
    return blur
end

-- Enhanced dragging system
function Library:DraggingEnabled(frame, parent)
    parent = parent or frame
    
    local dragging = false
    local dragInput, mousePos, framePos
    local lastInputTime = 0
    
    local function updateInput(input)
        local delta = input.Position - mousePos
        local newPos = UDim2.new(
            framePos.X.Scale,
            framePos.X.Offset + delta.X,
            framePos.Y.Scale,
            framePos.Y.Offset + delta.Y
        )
        
        -- Smooth dragging animation
        Utility:Tween(parent, {Position = newPos}, 0.1, Enum.EasingStyle.Quart)
    end
    
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            mousePos = input.Position
            framePos = parent.Position
            lastInputTime = tick()
            
            -- Visual feedback
            Utility:Tween(frame, {BackgroundTransparency = 0.1}, QUICK_ANIMATION)
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                    Utility:Tween(frame, {BackgroundTransparency = 0}, QUICK_ANIMATION)
                end
            end)
        end
    end)
    
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or 
           input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            updateInput(input)
        end
    end)
end

-- Generate unique library name
local LibName = "ModernUI_" .. tostring(math.random(100000, 999999))

function Library:ToggleUI()
    local ui = CoreGui:FindFirstChild(LibName)
    if ui then
        ui.Enabled = not ui.Enabled
    end
end

function Library:DestroyUI()
    local ui = CoreGui:FindFirstChild(LibName)
    if ui then
        ui:Destroy()
    end
end

function Library:Create(config)
    config = config or {}
    local title = config.Title or "Modern UI"
    local theme = config.Theme or "Dark"
    local size = config.Size or (Utility:IsMobile() and UDim2.new(0, 350, 0, 500) or UDim2.new(0, 480, 0, 360))
    
    -- Main UI structure
    local UILibrary = Instance.new("ScreenGui")
    local Main = Instance.new("Frame")
    local MainCorner = Instance.new("UICorner")
    local MainStroke = Instance.new("UIStroke")
    local TopBar = Instance.new("Frame")
    local TopBarCorner = Instance.new("UICorner")
    local TopBarGradient = Instance.new("UIGradient")
    local Title = Instance.new("TextLabel")
    local CloseButton = Instance.new("TextButton")
    local CloseIcon = Instance.new("ImageLabel")
    local MinimizeButton = Instance.new("TextButton")
    local MinimizeIcon = Instance.new("ImageLabel")
    local Navigation = Instance.new("Frame")
    local NavCorner = Instance.new("UICorner")
    local NavBlur = Instance.new("Frame")
    local NavBlurCorner = Instance.new("UICorner")
    local TabContainer = Instance.new("ScrollingFrame")
    local TabLayout = Instance.new("UIListLayout")
    local TabPadding = Instance.new("UIPadding")
    local ContentArea = Instance.new("Frame")
    local ContentCorner = Instance.new("UICorner")
    local ContentBlur = Instance.new("Frame")
    local ContentBlurCorner = Instance.new("UICorner")
    local TabsFolder = Instance.new("Folder")
    
    -- Setup main UI
    UILibrary.Name = LibName
    UILibrary.Parent = CoreGui
    UILibrary.ResetOnSpawn = false
    UILibrary.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Main frame with glassmorphism
    Main.Name = "Main"
    Main.Parent = UILibrary
    Main.AnchorPoint = Vector2.new(0.5, 0.5)
    Main.Position = UDim2.new(0.5, 0, 0.5, 0)
    Main.Size = size
    Main.BackgroundColor3 = Colors.Background
    Main.BackgroundTransparency = 0.1
    Main.BorderSizePixel = 0
    Main.ClipsDescendants = true
    
    MainCorner.CornerRadius = UDim.new(0, 16)
    MainCorner.Parent = Main
    
    MainStroke.Color = Colors.Border
    MainStroke.Thickness = 1
    MainStroke.Transparency = 0.5
    MainStroke.Parent = Main
    
    -- Add glow effect
    Utility:CreateGlow(Main, Colors.Primary, 0.2)
    
    -- Top bar with gradient
    TopBar.Name = "TopBar"
    TopBar.Parent = Main
    TopBar.Size = UDim2.new(1, 0, 0, 50)
    TopBar.BackgroundColor3 = Colors.Surface
    TopBar.BackgroundTransparency = 0.2
    TopBar.BorderSizePixel = 0
    
    TopBarCorner.CornerRadius = UDim.new(0, 16)
    TopBarCorner.Parent = TopBar
    
    TopBarGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Colors.Primary),
        ColorSequenceKeypoint.new(1, Colors.Secondary)
    }
    TopBarGradient.Rotation = 45
    TopBarGradient.Transparency = NumberSequence.new{
        NumberSequenceKeypoint.new(0, 0.7),
        NumberSequenceKeypoint.new(1, 0.9)
    }
    TopBarGradient.Parent = TopBar
    
    -- Title with modern typography
    Title.Name = "Title"
    Title.Parent = TopBar
    Title.Position = UDim2.new(0, 20, 0, 0)
    Title.Size = UDim2.new(1, -100, 1, 0)
    Title.BackgroundTransparency = 1
    Title.Font = Enum.Font.GothamBold
    Title.Text = title
    Title.TextColor3 = Colors.Text
    Title.TextSize = Utility:IsMobile() and 16 or 18
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.TextYAlignment = Enum.TextYAlignment.Center
    
    -- Modern close button
    CloseButton.Name = "CloseButton"
    CloseButton.Parent = TopBar
    CloseButton.AnchorPoint = Vector2.new(1, 0.5)
    CloseButton.Position = UDim2.new(1, -15, 0.5, 0)
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.BackgroundColor3 = Colors.Error
    CloseButton.BackgroundTransparency = 0.8
    CloseButton.BorderSizePixel = 0
    CloseButton.Text = ""
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = CloseButton
    
    CloseIcon.Name = "Icon"
    CloseIcon.Parent = CloseButton
    CloseIcon.AnchorPoint = Vector2.new(0.5, 0.5)
    CloseIcon.Position = UDim2.new(0.5, 0, 0.5, 0)
    CloseIcon.Size = UDim2.new(0, 16, 0, 16)
    CloseIcon.BackgroundTransparency = 1
    CloseIcon.Image = "rbxassetid://10747384394"
    CloseIcon.ImageColor3 = Colors.Text
    
    -- Minimize button
    MinimizeButton.Name = "MinimizeButton"
    MinimizeButton.Parent = TopBar
    MinimizeButton.AnchorPoint = Vector2.new(1, 0.5)
    MinimizeButton.Position = UDim2.new(1, -55, 0.5, 0)
    MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
    MinimizeButton.BackgroundColor3 = Colors.Warning
    MinimizeButton.BackgroundTransparency = 0.8
    MinimizeButton.BorderSizePixel = 0
    MinimizeButton.Text = ""
    
    local minimizeCorner = Instance.new("UICorner")
    minimizeCorner.CornerRadius = UDim.new(0, 8)
    minimizeCorner.Parent = MinimizeButton
    
    MinimizeIcon.Name = "Icon"
    MinimizeIcon.Parent = MinimizeButton
    MinimizeIcon.AnchorPoint = Vector2.new(0.5, 0.5)
    MinimizeIcon.Position = UDim2.new(0.5, 0, 0.5, 0)
    MinimizeIcon.Size = UDim2.new(0, 16, 0, 16)
    MinimizeIcon.BackgroundTransparency = 1
    MinimizeIcon.Image = "rbxassetid://10734896206"
    MinimizeIcon.ImageColor3 = Colors.Text
    
    -- Navigation panel with glassmorphism
    Navigation.Name = "Navigation"
    Navigation.Parent = Main
    Navigation.Position = UDim2.new(0, 10, 0, 60)
    Navigation.Size = UDim2.new(0, Utility:IsMobile() and 100 or 140, 1, -70)
    Navigation.BackgroundColor3 = Colors.Surface
    Navigation.BackgroundTransparency = 0.3
    Navigation.BorderSizePixel = 0
    
    NavCorner.CornerRadius = UDim.new(0, 12)
    NavCorner.Parent = Navigation
    
    NavBlur.Parent = Navigation
    NavBlur.Size = UDim2.new(1, 0, 1, 0)
    NavBlur.BackgroundColor3 = Colors.Glass
    NavBlur.BackgroundTransparency = 0.95
    NavBlur.BorderSizePixel = 0
    
    NavBlurCorner.CornerRadius = UDim.new(0, 12)
    NavBlurCorner.Parent = NavBlur
    
    -- Tab container
    TabContainer.Name = "TabContainer"
    TabContainer.Parent = Navigation
    TabContainer.Size = UDim2.new(1, 0, 1, 0)
    TabContainer.BackgroundTransparency = 1
    TabContainer.BorderSizePixel = 0
    TabContainer.ScrollBarThickness = 2
    TabContainer.ScrollBarImageColor3 = Colors.Primary
    TabContainer.AutomaticCanvasSize = Enum.AutomaticSize.Y
    TabContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
    
    TabLayout.Parent = TabContainer
    TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabLayout.Padding = UDim.new(0, 8)
    
    TabPadding.Parent = TabContainer
    TabPadding.PaddingTop = UDim.new(0, 15)
    TabPadding.PaddingBottom = UDim.new(0, 15)
    TabPadding.PaddingLeft = UDim.new(0, 10)
    TabPadding.PaddingRight = UDim.new(0, 10)
    
    -- Content area with glassmorphism
    ContentArea.Name = "ContentArea"
    ContentArea.Parent = Main
    ContentArea.Position = UDim2.new(0, Utility:IsMobile() and 120 or 160, 0, 60)
    ContentArea.Size = UDim2.new(1, -(Utility:IsMobile() and 130 or 170), 1, -70)
    ContentArea.BackgroundColor3 = Colors.Surface
    ContentArea.BackgroundTransparency = 0.4
    ContentArea.BorderSizePixel = 0
    
    ContentCorner.CornerRadius = UDim.new(0, 12)
    ContentCorner.Parent = ContentArea
    
    ContentBlur.Parent = ContentArea
    ContentBlur.Size = UDim2.new(1, 0, 1, 0)
    ContentBlur.BackgroundColor3 = Colors.Glass
    ContentBlur.BackgroundTransparency = 0.95
    ContentBlur.BorderSizePixel = 0
    
    ContentBlurCorner.CornerRadius = UDim.new(0, 12)
    ContentBlurCorner.Parent = ContentBlur
    
    TabsFolder.Name = "TabsFolder"
    TabsFolder.Parent = ContentArea
    
    -- Enable dragging
    Library:DraggingEnabled(TopBar, Main)
    
    -- Button interactions with modern animations
    local function setupButton(button, icon, hoverColor)
        button.MouseEnter:Connect(function()
            Utility:Tween(button, {BackgroundTransparency = 0.3}, QUICK_ANIMATION)
            Utility:Tween(icon, {ImageColor3 = Colors.Text}, QUICK_ANIMATION)
        end)
        
        button.MouseLeave:Connect(function()
            Utility:Tween(button, {BackgroundTransparency = 0.8}, QUICK_ANIMATION)
            Utility:Tween(icon, {ImageColor3 = Colors.Text}, QUICK_ANIMATION)
        end)
        
        button.MouseButton1Down:Connect(function()
            Utility:Tween(button, {Size = UDim2.new(0, 28, 0, 28)}, 0.1)
        end)
        
        button.MouseButton1Up:Connect(function()
            Utility:Tween(button, {Size = UDim2.new(0, 30, 0, 30)}, 0.1)
        end)
    end
    
    setupButton(CloseButton, CloseIcon, Colors.Error)
    setupButton(MinimizeButton, MinimizeIcon, Colors.Warning)
    
    -- Close button functionality
    CloseButton.MouseButton1Click:Connect(function()
        Utility:Tween(Main, {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        }, ANIMATION_SPEED, Enum.EasingStyle.Back, Enum.EasingDirection.In)
        
        wait(ANIMATION_SPEED)
        Library:DestroyUI()
    end)
    
    -- Minimize functionality
    local minimized = false
    MinimizeButton.MouseButton1Click:Connect(function()
        if not minimized then
            Utility:Tween(Main, {Size = UDim2.new(0, size.X.Offset, 0, 50)}, ANIMATION_SPEED)
            Navigation.Visible = false
            ContentArea.Visible = false
            minimized = true
        else
            Utility:Tween(Main, {Size = size}, ANIMATION_SPEED)
            Navigation.Visible = true
            ContentArea.Visible = true
            minimized = false
        end
    end)
    
    -- Entrance animation
    Main.Size = UDim2.new(0, 0, 0, 0)
    Utility:Tween(Main, {Size = size}, ANIMATION_SPEED, Enum.EasingStyle.Back)
    
    local Tabs = {}
    local firstTab = true
    
    function Tabs:Tab(config)
        config = config or {}
        local tabName = config.Name or "Tab"
        local tabIcon = config.Icon or "rbxassetid://10734950309"
        
        -- Tab button
        local TabButton = Instance.new("TextButton")
        local TabCorner = Instance.new("UICorner")
        local TabIcon = Instance.new("ImageLabel")
        local TabLabel = Instance.new("TextLabel")
        local TabGlow = Instance.new("Frame")
        local TabGlowCorner = Instance.new("UICorner")
        
        -- Tab content
        local TabContent = Instance.new("ScrollingFrame")
        local ContentLayout = Instance.new("UIListLayout")
        local ContentPadding = Instance.new("UIPadding")
        
        -- Tab button setup
        TabButton.Name = tabName .. "_Button"
        TabButton.Parent = TabContainer
        TabButton.Size = UDim2.new(1, 0, 0, Utility:IsMobile() and 45 or 50)
        TabButton.BackgroundColor3 = Colors.SurfaceLight
        TabButton.BackgroundTransparency = firstTab and 0.3 or 1
        TabButton.BorderSizePixel = 0
        TabButton.Text = ""
        
        TabCorner.CornerRadius = UDim.new(0, 10)
        TabCorner.Parent = TabButton
        
        TabGlow.Name = "Glow"
        TabGlow.Parent = TabButton
        TabGlow.Size = UDim2.new(0, 4, 1, 0)
        TabGlow.BackgroundColor3 = Colors.Primary
        TabGlow.BackgroundTransparency = firstTab and 0 or 1
        TabGlow.BorderSizePixel = 0
        
        TabGlowCorner.CornerRadius = UDim.new(0, 2)
        TabGlowCorner.Parent = TabGlow
        
        TabIcon.Name = "Icon"
        TabIcon.Parent = TabButton
        TabIcon.Position = UDim2.new(0, 15, 0.5, -10)
        TabIcon.Size = UDim2.new(0, 20, 0, 20)
        TabIcon.BackgroundTransparency = 1
        TabIcon.Image = tabIcon
        TabIcon.ImageColor3 = firstTab and Colors.Primary or Colors.TextSecondary
        
        if not Utility:IsMobile() then
            TabLabel.Name = "Label"
            TabLabel.Parent = TabButton
            TabLabel.Position = UDim2.new(0, 45, 0, 0)
            TabLabel.Size = UDim2.new(1, -50, 1, 0)
            TabLabel.BackgroundTransparency = 1
            TabLabel.Font = Enum.Font.Gotham
            TabLabel.Text = tabName
            TabLabel.TextColor3 = firstTab and Colors.Text or Colors.TextSecondary
            TabLabel.TextSize = 12
            TabLabel.TextXAlignment = Enum.TextXAlignment.Left
        end
        
        -- Tab content setup
        TabContent.Name = tabName .. "_Content"
        TabContent.Parent = TabsFolder
        TabContent.Size = UDim2.new(1, 0, 1, 0)
        TabContent.BackgroundTransparency = 1
        TabContent.BorderSizePixel = 0
        TabContent.ScrollBarThickness = 3
        TabContent.ScrollBarImageColor3 = Colors.Primary
        TabContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
        TabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
        TabContent.Visible = firstTab
        
        ContentLayout.Parent = TabContent
        ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
        ContentLayout.Padding = UDim.new(0, 10)
        
        ContentPadding.Parent = TabContent
        ContentPadding.PaddingTop = UDim.new(0, 15)
        ContentPadding.PaddingBottom = UDim.new(0, 15)
        ContentPadding.PaddingLeft = UDim.new(0, 15)
        ContentPadding.PaddingRight = UDim.new(0, 15)
        
        -- Tab switching logic
        TabButton.MouseButton1Click:Connect(function()
            -- Hide all tabs
            for _, tab in pairs(TabsFolder:GetChildren()) do
                if tab:IsA("ScrollingFrame") then
                    tab.Visible = false
                end
            end
            
            -- Reset all tab buttons
            for _, button in pairs(TabContainer:GetChildren()) do
                if button:IsA("TextButton") then
                    Utility:Tween(button, {BackgroundTransparency = 1}, QUICK_ANIMATION)
                    local glow = button:FindFirstChild("Glow")
                    if glow then
                        Utility:Tween(glow, {BackgroundTransparency = 1}, QUICK_ANIMATION)
                    end
                    local icon = button:FindFirstChild("Icon")
                    if icon then
                        Utility:Tween(icon, {ImageColor3 = Colors.TextSecondary}, QUICK_ANIMATION)
                    end
                    local label = button:FindFirstChild("Label")
                    if label then
                        Utility:Tween(label, {TextColor3 = Colors.TextSecondary}, QUICK_ANIMATION)
                    end
                end
            end
            
            -- Activate current tab
            TabContent.Visible = true
            Utility:Tween(TabButton, {BackgroundTransparency = 0.3}, QUICK_ANIMATION)
            Utility:Tween(TabGlow, {BackgroundTransparency = 0}, QUICK_ANIMATION)
            Utility:Tween(TabIcon, {ImageColor3 = Colors.Primary}, QUICK_ANIMATION)
            if TabLabel then
                Utility:Tween(TabLabel, {TextColor3 = Colors.Text}, QUICK_ANIMATION)
            end
        end)
        
        -- Hover effects
        TabButton.MouseEnter:Connect(function()
            if TabContent.Visible then return end
            Utility:Tween(TabButton, {BackgroundTransparency = 0.7}, QUICK_ANIMATION)
            Utility:Tween(TabIcon, {ImageColor3 = Colors.Text}, QUICK_ANIMATION)
            if TabLabel then
                Utility:Tween(TabLabel, {TextColor3 = Colors.Text}, QUICK_ANIMATION)
            end
        end)
        
        TabButton.MouseLeave:Connect(function()
            if TabContent.Visible then return end
            Utility:Tween(TabButton, {BackgroundTransparency = 1}, QUICK_ANIMATION)
            Utility:Tween(TabIcon, {ImageColor3 = Colors.TextSecondary}, QUICK_ANIMATION)
            if TabLabel then
                Utility:Tween(TabLabel, {TextColor3 = Colors.TextSecondary}, QUICK_ANIMATION)
            end
        end)
        
        firstTab = false
        
        local Elements = {}
        
        function Elements:Section(name)
            name = name or "Section"
            
            local Section = Instance.new("Frame")
            local SectionCorner = Instance.new("UICorner")
            local SectionHeader = Instance.new("Frame")
            local SectionTitle = Instance.new("TextLabel")
            local SectionLine = Instance.new("Frame")
            local SectionLineCorner = Instance.new("UICorner")
            local SectionContent = Instance.new("Frame")
            local SectionLayout = Instance.new("UIListLayout")
            local SectionPadding = Instance.new("UIPadding")
            
            Section.Name = name .. "_Section"
            Section.Parent = TabContent
            Section.Size = UDim2.new(1, 0, 0, 0)
            Section.BackgroundColor3 = Colors.SurfaceLight
            Section.BackgroundTransparency = 0.5
            Section.BorderSizePixel = 0
            Section.AutomaticSize = Enum.AutomaticSize.Y
            
            SectionCorner.CornerRadius = UDim.new(0, 8)
            SectionCorner.Parent = Section
            
            SectionHeader.Name = "Header"
            SectionHeader.Parent = Section
            SectionHeader.Size = UDim2.new(1, 0, 0, 35)
            SectionHeader.BackgroundTransparency = 1
            
            SectionTitle.Name = "Title"
            SectionTitle.Parent = SectionHeader
            SectionTitle.Position = UDim2.new(0, 15, 0, 0)
            SectionTitle.Size = UDim2.new(1, -30, 1, 0)
            SectionTitle.BackgroundTransparency = 1
            SectionTitle.Font = Enum.Font.GothamBold
            SectionTitle.Text = name
            SectionTitle.TextColor3 = Colors.Text
            SectionTitle.TextSize = 14
            SectionTitle.TextXAlignment = Enum.TextXAlignment.Left
            
            SectionLine.Name = "Line"
            SectionLine.Parent = SectionHeader
            SectionLine.AnchorPoint = Vector2.new(0, 1)
            SectionLine.Position = UDim2.new(0, 15, 1, -5)
            SectionLine.Size = UDim2.new(1, -30, 0, 2)
            SectionLine.BackgroundColor3 = Colors.Primary
            SectionLine.BorderSizePixel = 0
            
            SectionLineCorner.CornerRadius = UDim.new(0, 1)
            SectionLineCorner.Parent = SectionLine
            
            SectionContent.Name = "Content"
            SectionContent.Parent = Section
            SectionContent.Position = UDim2.new(0, 0, 0, 35)
            SectionContent.Size = UDim2.new(1, 0, 0, 0)
            SectionContent.BackgroundTransparency = 1
            SectionContent.AutomaticSize = Enum.AutomaticSize.Y
            
            SectionLayout.Parent = SectionContent
            SectionLayout.SortOrder = Enum.SortOrder.LayoutOrder
            SectionLayout.Padding = UDim.new(0, 8)
            
            SectionPadding.Parent = SectionContent
            SectionPadding.PaddingTop = UDim.new(0, 10)
            SectionPadding.PaddingBottom = UDim.new(0, 15)
            SectionPadding.PaddingLeft = UDim.new(0, 15)
            SectionPadding.PaddingRight = UDim.new(0, 15)
            
            local SectionElements = {}
            
            function SectionElements:Button(config)
                config = config or {}
                local buttonText = config.Text or "Button"
                local callback = config.Callback or function() end
                
                local Button = Instance.new("TextButton")
                local ButtonCorner = Instance.new("UICorner")
                local ButtonGradient = Instance.new("UIGradient")
                local ButtonGlow = Utility:CreateGlow(Button, Colors.Primary, 0)
                
                Button.Name = buttonText .. "_Button"
                Button.Parent = SectionContent
                Button.Size = UDim2.new(1, 0, 0, 35)
                Button.BackgroundColor3 = Colors.Primary
                Button.BorderSizePixel = 0
                Button.Font = Enum.Font.GothamBold
                Button.Text = buttonText
                Button.TextColor3 = Colors.Text
                Button.TextSize = 13
                
                ButtonCorner.CornerRadius = UDim.new(0, 8)
                ButtonCorner.Parent = Button
                
                ButtonGradient.Color = ColorSequence.new{
                    ColorSequenceKeypoint.new(0, Colors.Primary),
                    ColorSequenceKeypoint.new(1, Colors.Secondary)
                }
                ButtonGradient.Rotation = 45
                ButtonGradient.Parent = Button
                
                -- Button interactions
                Button.MouseEnter:Connect(function()
                    Utility:Tween(Button, {Size = UDim2.new(1, 0, 0, 37)}, QUICK_ANIMATION)
                    Utility:Tween(ButtonGlow, {ImageTransparency = 0.7}, QUICK_ANIMATION)
                end)
                
                Button.MouseLeave:Connect(function()
                    Utility:Tween(Button, {Size = UDim2.new(1, 0, 0, 35)}, QUICK_ANIMATION)
                    Utility:Tween(ButtonGlow, {ImageTransparency = 1}, QUICK_ANIMATION)
                end)
                
                Button.MouseButton1Down:Connect(function()
                    Utility:Tween(Button, {Size = UDim2.new(1, 0, 0, 33)}, 0.1)
                end)
                
                Button.MouseButton1Up:Connect(function()
                    Utility:Tween(Button, {Size = UDim2.new(1, 0, 0, 35)}, 0.1)
                end)
                
                Button.MouseButton1Click:Connect(function()
                    callback()
                end)
                
                return Button
            end
            
            function SectionElements:Toggle(config)
                config = config or {}
                local toggleText = config.Text or "Toggle"
                local defaultState = config.Default or false
                local callback = config.Callback or function() end
                
                local Toggle = Instance.new("Frame")
                local ToggleCorner = Instance.new("UICorner")
                local ToggleLabel = Instance.new("TextLabel")
                local ToggleButton = Instance.new("TextButton")
                local ToggleButtonCorner = Instance.new("UICorner")
                local ToggleIndicator = Instance.new("Frame")
                local IndicatorCorner = Instance.new("UICorner")
                
                local toggled = defaultState
                
                Toggle.Name = toggleText .. "_Toggle"
                Toggle.Parent = SectionContent
                Toggle.Size = UDim2.new(1, 0, 0, 35)
                Toggle.BackgroundColor3 = Colors.SurfaceLight
                Toggle.BackgroundTransparency = 0.3
                Toggle.BorderSizePixel = 0
                
                ToggleCorner.CornerRadius = UDim.new(0, 8)
                ToggleCorner.Parent = Toggle
                
                ToggleLabel.Name = "Label"
                ToggleLabel.Parent = Toggle
                ToggleLabel.Position = UDim2.new(0, 15, 0, 0)
                ToggleLabel.Size = UDim2.new(1, -70, 1, 0)
                ToggleLabel.BackgroundTransparency = 1
                ToggleLabel.Font = Enum.Font.Gotham
                ToggleLabel.Text = toggleText
                ToggleLabel.TextColor3 = Colors.Text
                ToggleLabel.TextSize = 13
                ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
                
                ToggleButton.Name = "Button"
                ToggleButton.Parent = Toggle
                ToggleButton.AnchorPoint = Vector2.new(1, 0.5)
                ToggleButton.Position = UDim2.new(1, -15, 0.5, 0)
                ToggleButton.Size = UDim2.new(0, 45, 0, 20)
                ToggleButton.BackgroundColor3 = toggled and Colors.Primary or Colors.Border
                ToggleButton.BorderSizePixel = 0
                ToggleButton.Text = ""
                
                ToggleButtonCorner.CornerRadius = UDim.new(0, 10)
                ToggleButtonCorner.Parent = ToggleButton
                
                ToggleIndicator.Name = "Indicator"
                ToggleIndicator.Parent = ToggleButton
                ToggleIndicator.Position = UDim2.new(0, toggled and 27 or 3, 0.5, -8)
                ToggleIndicator.Size = UDim2.new(0, 16, 0, 16)
                ToggleIndicator.BackgroundColor3 = Colors.Text
                ToggleIndicator.BorderSizePixel = 0
                
                IndicatorCorner.CornerRadius = UDim.new(0, 8)
                IndicatorCorner.Parent = ToggleIndicator
                
                ToggleButton.MouseButton1Click:Connect(function()
                    toggled = not toggled
                    
                    Utility:Tween(ToggleButton, {
                        BackgroundColor3 = toggled and Colors.Primary or Colors.Border
                    }, QUICK_ANIMATION)
                    
                    Utility:Tween(ToggleIndicator, {
                        Position = UDim2.new(0, toggled and 27 or 3, 0.5, -8)
                    }, QUICK_ANIMATION)
                    
                    callback(toggled)
                end)
                
                -- Hover effects
                ToggleButton.MouseEnter:Connect(function()
                    Utility:Tween(ToggleIndicator, {Size = UDim2.new(0, 18, 0, 18)}, QUICK_ANIMATION)
                end)
                
                ToggleButton.MouseLeave:Connect(function()
                    Utility:Tween(ToggleIndicator, {Size = UDim2.new(0, 16, 0, 16)}, QUICK_ANIMATION)
                end)
                
                return {
                    SetValue = function(value)
                        toggled = value
                        Utility:Tween(ToggleButton, {
                            BackgroundColor3 = toggled and Colors.Primary or Colors.Border
                        }, QUICK_ANIMATION)
                        Utility:Tween(ToggleIndicator, {
                            Position = UDim2.new(0, toggled and 27 or 3, 0.5, -8)
                        }, QUICK_ANIMATION)
                    end,
                    GetValue = function()
                        return toggled
                    end
                }
            end
            
            function SectionElements:Slider(config)
                config = config or {}
                local sliderText = config.Text or "Slider"
                local minValue = config.Min or 0
                local maxValue = config.Max or 100
                local defaultValue = config.Default or minValue
                local callback = config.Callback or function() end
                
                local Slider = Instance.new("Frame")
                local SliderCorner = Instance.new("UICorner")
                local SliderLabel = Instance.new("TextLabel")
                local SliderValue = Instance.new("TextLabel")
                local SliderTrack = Instance.new("Frame")
                local TrackCorner = Instance.new("UICorner")
                local SliderFill = Instance.new("Frame")
                local FillCorner = Instance.new("UICorner")
                local SliderHandle = Instance.new("TextButton")
                local HandleCorner = Instance.new("UICorner")
                
                local currentValue = defaultValue
                local dragging = false
                
                Slider.Name = sliderText .. "_Slider"
                Slider.Parent = SectionContent
                Slider.Size = UDim2.new(1, 0, 0, 50)
                Slider.BackgroundColor3 = Colors.SurfaceLight
                Slider.BackgroundTransparency = 0.3
                Slider.BorderSizePixel = 0
                
                SliderCorner.CornerRadius = UDim.new(0, 8)
                SliderCorner.Parent = Slider
                
                SliderLabel.Name = "Label"
                SliderLabel.Parent = Slider
                SliderLabel.Position = UDim2.new(0, 15, 0, 5)
                SliderLabel.Size = UDim2.new(1, -30, 0, 20)
                SliderLabel.BackgroundTransparency = 1
                SliderLabel.Font = Enum.Font.Gotham
                SliderLabel.Text = sliderText
                SliderLabel.TextColor3 = Colors.Text
                SliderLabel.TextSize = 13
                SliderLabel.TextXAlignment = Enum.TextXAlignment.Left
                
                SliderValue.Name = "Value"
                SliderValue.Parent = Slider
                SliderValue.Position = UDim2.new(1, -15, 0, 5)
                SliderValue.Size = UDim2.new(0, 0, 0, 20)
                SliderValue.BackgroundTransparency = 1
                SliderValue.Font = Enum.Font.GothamBold
                SliderValue.Text = tostring(currentValue)
                SliderValue.TextColor3 = Colors.Primary
                SliderValue.TextSize = 13
                SliderValue.TextXAlignment = Enum.TextXAlignment.Right
                
                SliderTrack.Name = "Track"
                SliderTrack.Parent = Slider
                SliderTrack.Position = UDim2.new(0, 15, 0, 30)
                SliderTrack.Size = UDim2.new(1, -30, 0, 6)
                SliderTrack.BackgroundColor3 = Colors.Border
                SliderTrack.BorderSizePixel = 0
                
                TrackCorner.CornerRadius = UDim.new(0, 3)
                TrackCorner.Parent = SliderTrack
                
                SliderFill.Name = "Fill"
                SliderFill.Parent = SliderTrack
                SliderFill.Size = UDim2.new((currentValue - minValue) / (maxValue - minValue), 0, 1, 0)
                SliderFill.BackgroundColor3 = Colors.Primary
                SliderFill.BorderSizePixel = 0
                
                FillCorner.CornerRadius = UDim.new(0, 3)
                FillCorner.Parent = SliderFill
                
                SliderHandle.Name = "Handle"
                SliderHandle.Parent = SliderTrack
                SliderHandle.AnchorPoint = Vector2.new(0.5, 0.5)
                SliderHandle.Position = UDim2.new((currentValue - minValue) / (maxValue - minValue), 0, 0.5, 0)
                SliderHandle.Size = UDim2.new(0, 16, 0, 16)
                SliderHandle.BackgroundColor3 = Colors.Text
                SliderHandle.BorderSizePixel = 0
                SliderHandle.Text = ""
                
                HandleCorner.CornerRadius = UDim.new(0, 8)
                HandleCorner.Parent = SliderHandle
                
                local function updateSlider(input)
                    local trackPos = SliderTrack.AbsolutePosition.X
                    local trackSize = SliderTrack.AbsoluteSize.X
                    local mousePos = input.Position.X
                    
                    local percent = math.clamp((mousePos - trackPos) / trackSize, 0, 1)
                    currentValue = math.floor(minValue + (maxValue - minValue) * percent)
                    
                    SliderValue.Text = tostring(currentValue)
                    
                    Utility:Tween(SliderFill, {Size = UDim2.new(percent, 0, 1, 0)}, 0.1)
                    Utility:Tween(SliderHandle, {Position = UDim2.new(percent, 0, 0.5, 0)}, 0.1)
                    
                    callback(currentValue)
                end
                
                SliderHandle.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
                       input.UserInputType == Enum.UserInputType.Touch then
                        dragging = true
                        Utility:Tween(SliderHandle, {Size = UDim2.new(0, 20, 0, 20)}, QUICK_ANIMATION)
                    end
                end)
                
                SliderHandle.InputEnded:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
                       input.UserInputType == Enum.UserInputType.Touch then
                        dragging = false
                        Utility:Tween(SliderHandle, {Size = UDim2.new(0, 16, 0, 16)}, QUICK_ANIMATION)
                    end
                end)
                
                UserInputService.InputChanged:Connect(function(input)
                    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or 
                                   input.UserInputType == Enum.UserInputType.Touch) then
                        updateSlider(input)
                    end
                end)
                
                SliderTrack.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
                       input.UserInputType == Enum.UserInputType.Touch then
                        updateSlider(input)
                    end
                end)
                
                return {
                    SetValue = function(value)
                        currentValue = math.clamp(value, minValue, maxValue)
                        SliderValue.Text = tostring(currentValue)
                        local percent = (currentValue - minValue) / (maxValue - minValue)
                        Utility:Tween(SliderFill, {Size = UDim2.new(percent, 0, 1, 0)}, QUICK_ANIMATION)
                        Utility:Tween(SliderHandle, {Position = UDim2.new(percent, 0, 0.5, 0)}, QUICK_ANIMATION)
                    end,
                    GetValue = function()
                        return currentValue
                    end
                }
            end
            
            function SectionElements:TextBox(config)
                config = config or {}
                local placeholder = config.Placeholder or "Enter text..."
                local defaultText = config.Default or ""
                local callback = config.Callback or function() end
                
                local TextBox = Instance.new("Frame")
                local TextBoxCorner = Instance.new("UICorner")
                local TextInput = Instance.new("TextBox")
                local TextInputCorner = Instance.new("UICorner")
                local TextInputStroke = Instance.new("UIStroke")
                
                TextBox.Name = "TextBox"
                TextBox.Parent = SectionContent
                TextBox.Size = UDim2.new(1, 0, 0, 35)
                TextBox.BackgroundColor3 = Colors.SurfaceLight
                TextBox.BackgroundTransparency = 0.3
                TextBox.BorderSizePixel = 0
                
                TextBoxCorner.CornerRadius = UDim.new(0, 8)
                TextBoxCorner.Parent = TextBox
                
                TextInput.Name = "Input"
                TextInput.Parent = TextBox
                TextInput.Position = UDim2.new(0, 10, 0, 5)
                TextInput.Size = UDim2.new(1, -20, 1, -10)
                TextInput.BackgroundColor3 = Colors.Background
                TextInput.BackgroundTransparency = 0.3
                TextInput.BorderSizePixel = 0
                TextInput.Font = Enum.Font.Gotham
                TextInput.PlaceholderText = placeholder
                TextInput.PlaceholderColor3 = Colors.TextSecondary
                TextInput.Text = defaultText
                TextInput.TextColor3 = Colors.Text
                TextInput.TextSize = 13
                TextInput.TextXAlignment = Enum.TextXAlignment.Left
                
                TextInputCorner.CornerRadius = UDim.new(0, 6)
                TextInputCorner.Parent = TextInput
                
                TextInputStroke.Color = Colors.Border
                TextInputStroke.Thickness = 1
                TextInputStroke.Transparency = 0.5
                TextInputStroke.Parent = TextInput
                
                TextInput.Focused:Connect(function()
                    Utility:Tween(TextInputStroke, {Color = Colors.Primary, Transparency = 0}, QUICK_ANIMATION)
                end)
                
                TextInput.FocusLost:Connect(function()
                    Utility:Tween(TextInputStroke, {Color = Colors.Border, Transparency = 0.5}, QUICK_ANIMATION)
                    callback(TextInput.Text)
                end)
                
                return {
                    SetText = function(text)
                        TextInput.Text = text
                    end,
                    GetText = function()
                        return TextInput.Text
                    end
                }
            end
            
            function SectionElements:Label(config)
                config = config or {}
                local labelText = config.Text or "Label"
                
                local Label = Instance.new("Frame")
                local LabelCorner = Instance.new("UICorner")
                local LabelText = Instance.new("TextLabel")
                
                Label.Name = "Label"
                Label.Parent = SectionContent
                Label.Size = UDim2.new(1, 0, 0, 30)
                Label.BackgroundColor3 = Colors.SurfaceLight
                Label.BackgroundTransparency = 0.5
                Label.BorderSizePixel = 0
                
                LabelCorner.CornerRadius = UDim.new(0, 8)
                LabelCorner.Parent = Label
                
                LabelText.Name = "Text"
                LabelText.Parent = Label
                LabelText.Position = UDim2.new(0, 15, 0, 0)
                LabelText.Size = UDim2.new(1, -30, 1, 0)
                LabelText.BackgroundTransparency = 1
                LabelText.Font = Enum.Font.Gotham
                LabelText.Text = labelText
                LabelText.TextColor3 = Colors.TextSecondary
                LabelText.TextSize = 13
                LabelText.TextXAlignment = Enum.TextXAlignment.Left
                
                return {
                    SetText = function(text)
                        LabelText.Text = text
                    end
                }
            end
            
            return SectionElements
        end
        
        return Elements
    end
    
    return Tabs
end

-- Notification system
function Library:Notify(config)
    config = config or {}
    local title = config.Title or "Notification"
    local text = config.Text or "This is a notification"
    local duration = config.Duration or 3
    local type = config.Type or "Info" -- Info, Success, Warning, Error
    
    local colors = {
        Info = Colors.Primary,
        Success = Colors.Success,
        Warning = Colors.Warning,
        Error = Colors.Error
    }
    
    local Notification = Instance.new("Frame")
    local NotifCorner = Instance.new("UICorner")
    local NotifStroke = Instance.new("UIStroke")
    local NotifTitle = Instance.new("TextLabel")
    local NotifText = Instance.new("TextLabel")
    local NotifIcon = Instance.new("ImageLabel")
    local NotifProgress = Instance.new("Frame")
    local ProgressCorner = Instance.new("UICorner")
    
    Notification.Name = "Notification"
    Notification.Parent = CoreGui
    Notification.AnchorPoint = Vector2.new(1, 0)
    Notification.Position = UDim2.new(1, 20, 0, 20)
    Notification.Size = UDim2.new(0, 300, 0, 80)
    Notification.BackgroundColor3 = Colors.Surface
    Notification.BackgroundTransparency = 0.1
    Notification.BorderSizePixel = 0
    
    NotifCorner.CornerRadius = UDim.new(0, 12)
    NotifCorner.Parent = Notification
    
    NotifStroke.Color = colors[type]
    NotifStroke.Thickness = 2
    NotifStroke.Parent = Notification
    
    NotifTitle.Name = "Title"
    NotifTitle.Parent = Notification
    NotifTitle.Position = UDim2.new(0, 50, 0, 10)
    NotifTitle.Size = UDim2.new(1, -60, 0, 20)
    NotifTitle.BackgroundTransparency = 1
    NotifTitle.Font = Enum.Font.GothamBold
    NotifTitle.Text = title
    NotifTitle.TextColor3 = Colors.Text
    NotifTitle.TextSize = 14
    NotifTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    NotifText.Name = "Text"
    NotifText.Parent = Notification
    NotifText.Position = UDim2.new(0, 50, 0, 30)
    NotifText.Size = UDim2.new(1, -60, 0, 35)
    NotifText.BackgroundTransparency = 1
    NotifText.Font = Enum.Font.Gotham
    NotifText.Text = text
    NotifText.TextColor3 = Colors.TextSecondary
    NotifText.TextSize = 12
    NotifText.TextWrapped = true
    NotifText.TextXAlignment = Enum.TextXAlignment.Left
    NotifText.TextYAlignment = Enum.TextYAlignment.Top
    
    NotifIcon.Name = "Icon"
    NotifIcon.Parent = Notification
    NotifIcon.Position = UDim2.new(0, 15, 0.5, -10)
    NotifIcon.Size = UDim2.new(0, 20, 0, 20)
    NotifIcon.BackgroundTransparency = 1
    NotifIcon.ImageColor3 = colors[type]
    
    local icons = {
        Info = "rbxassetid://10734950309",
        Success = "rbxassetid://10709790948",
        Warning = "rbxassetid://10709791437",
        Error = "rbxassetid://10709789948"
    }
    NotifIcon.Image = icons[type]
    
    NotifProgress.Name = "Progress"
    NotifProgress.Parent = Notification
    NotifProgress.AnchorPoint = Vector2.new(0, 1)
    NotifProgress.Position = UDim2.new(0, 0, 1, 0)
    NotifProgress.Size = UDim2.new(1, 0, 0, 3)
    NotifProgress.BackgroundColor3 = colors[type]
    NotifProgress.BorderSizePixel = 0
    
    ProgressCorner.CornerRadius = UDim.new(0, 2)
    ProgressCorner.Parent = NotifProgress
    
    -- Entrance animation
    Notification.Position = UDim2.new(1, 20, 0, 20)
    Utility:Tween(Notification, {Position = UDim2.new(1, -20, 0, 20)}, ANIMATION_SPEED, Enum.EasingStyle.Back)
    
    -- Progress animation
    Utility:Tween(NotifProgress, {Size = UDim2.new(0, 0, 0, 3)}, duration, Enum.EasingStyle.Linear)
    
    -- Auto dismiss
    wait(duration)
    Utility:Tween(Notification, {Position = UDim2.new(1, 20, 0, 20)}, ANIMATION_SPEED, Enum.EasingStyle.Back, Enum.EasingDirection.In)
    wait(ANIMATION_SPEED)
    Notification:Destroy()
end

return Library
